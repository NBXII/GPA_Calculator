<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UniMetrics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>GPA Calculator</h1>
        <p class="subtitle">
          Track your academic progress easily and visually.
        </p>
        <button id="themeToggleBtn" class="theme-btn">ðŸŒ™</button>
      </header>
      <section class="guide-section" aria-labelledby="guideHeading">
        <div class="guide-list">
          <h2 id="guideHeading">Grade Point Reference & How GPA Is Calculated</h2>
          <h3>Step-by-step</h3>
          <ol>
            <li>Enter each course name in the table under "Courses &amp; Grades".</li>
            <li>Select the letter grade and enter the course credit hours (must be &gt; 0).</li>
            <li>Click <strong>Calculate GPA</strong> to add those courses and compute the GPA.</li>
            <li>Formula used: <em>GPA = (Î£ grade_point Ã— credit_hours) / (Î£ credit_hours)</em>. Example: an A (4.0, 3 credits) and a B (3.0, 4 credits) â†’ (4Ã—3 + 3Ã—4)/7 = 3.43.</li>
            <li>Saved courses update the Courses Overview and the cumulative displays.</li>
            <li>Use the <strong>Semester CGPA Calculator</strong> modal to compute weighted or simple averages across semesters.</li>
          </ol>
          <div class="distinction-explanations">
            <h4>Distinction Levels</h4>
            <ul>
              <li><strong>Great Distinction (GPA â‰¥ 3.5):</strong> Awarded for outstanding academic performance across your courses â€” indicates consistent excellence.</li>
              <li><strong>Distinction (GPA â‰¥ 3.0):</strong> Strong academic performance above departmental expectations.</li>
              <li><strong>Academic Warning (GPA â‰¥ 2.0):</strong> Performance is below expectations; consider academic support and consult your advisor.</li>
              <li><strong>Academic Dismissal (GPA &lt; 2.0):</strong> Performance is unsatisfactory and may lead to dismissal; immediate action is recommended.</li>
            </ul>
          </div>
        </div>
        <div class="grade-legend" aria-hidden="false">
          <div class="legend-card">
            <h4 style="margin-top:0;">Grade Legend</h4>
            <table>
              <thead><tr><th>Letter</th><th>Point</th></tr></thead>
              <tbody>
                <tr><td>A+, A</td><td>4.00</td></tr>
                <tr><td>A-</td><td>3.67</td></tr>
                <tr><td>B+</td><td>3.33</td></tr>
                <tr><td>B</td><td>3.00</td></tr>
                <tr><td>B-</td><td>2.67</td></tr>
                <tr><td>C+</td><td>2.00</td></tr>
                <tr><td>C</td><td>1.50</td></tr>
                <tr><td>C-</td><td>1.00</td></tr>
                <tr><td>D+, D</td><td>1.00</td></tr>
                <tr><td>F</td><td>0.00</td></tr>
              </tbody>
            </table>
            <p style="font-size:0.9rem;margin-top:8px;color:var(--text-muted-color);">Use these grade-point mappings when adding courses. The calculator uses the grade points multiplied by credits to compute GPA.</p>
          </div>
        </div>
      </section>

      <section class="input-section">
        <div class="courses-entry">
          <label>Courses & Grades</label>
          <table id="coursesInputTable" class="input-table">
            <thead>
              <tr>
                <th>Course Name</th>
                <th>Grade</th>
                <th>Credit Hours</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <!-- JS will add rows here -->
            </tbody>
          </table>
          <button
            type="button"
            id="addCourseRowBtn"
            class="icon-btn"
            title="Add Course">
            <span>+</span> Add Course
          </button>
        </div>
        <button type="button" id="submitCoursesBtn" class="primary-btn">
          Calculate GPA
        </button>
        <button
          type="button"
          id="stdGpaBtn"
          class="icon-btn"
          style="margin-left: 10px">
          Standard GPA Calculator
        </button>
        <button
          type="button"
          id="semCgpaBtn"
          class="icon-btn"
          style="margin-left: 10px">
          Semester CGPA Calculator
        </button>
      </section>
      
      <section class="results-section">
        <div class="summary-cards">
          <div class="card">
            <div class="card-title">GPA</div>
            <div id="gpaDisplay" class="card-value">-</div>
            <div id="gpaLevel" class="gpa-level" aria-live="polite"></div>
          </div>
          <div class="card">
            <div class="card-title">Cumulative GPA</div>
            <div id="cumulativeGpaDisplay" class="card-value">-</div>
            <div id="cumulativeLevel" class="gpa-level" aria-live="polite"></div>
          </div>
          <div class="card">
            <div class="card-title">Total Credits</div>
            <div id="totalCreditHours" class="card-value">-</div>
          </div>
        </div>
        <div class="table-chart-wrapper">
          <div class="table-wrapper">
            <h2>Courses Overview</h2>
            <table id="coursesTable">
              <thead>
                <tr>
                  <th>Course</th>
                  <th>Grade</th>
                  <th>Grade Point</th>
                  <th>Credit</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <!-- Populated by JS -->
              </tbody>
            </table>
          </div>
          <div class="chart-wrapper">
            <h2>Progress</h2>
            <div id="progressPlaceholder" class="progress-placeholder">Add courses to see your progress chart</div>
            <canvas id="progressChart" style="display:none"></canvas>
          </div>
        </div>
      </section>
      <footer>
        <p>
          &copy; <span id="year"></span> UniMetrics. Designed by
          Nahom-Biruk .
        </p>
      </footer>
    </div>

    <div id="toastContainer"></div>

    <!-- Standard GPA Calculator Modal -->
    <div id="stdGpaModal" class="modal">
      <div class="modal-content">
        <span id="stdGpaClose" class="close-btn">&times;</span>
        <h2>Standard GPA Calculator</h2>
        <table class="input-table">
          <thead>
            <tr>
              <th>Course Name</th>
              <th>Grade</th>
              <th>Credit Hours</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="stdGpaTableBody">
            <!-- JS will add rows here -->
          </tbody>
        </table>
        <button type="button" id="stdGpaAddRowBtn" class="icon-btn">
          <span>+</span> Add Course
        </button>
        <button type="button" id="stdGpaCalcBtn" class="primary-btn">
          Calculate
        </button>
        <p id="stdGpaResult" class="modal-result"></p>
      </div>
    </div>

    <!-- Semester CGPA Calculator Modal -->
    <div id="semCgpaModal" class="modal">
      <div class="modal-content">
        <span id="semCgpaClose" class="close-btn">&times;</span>
        <h2>Semester CGPA Calculator</h2>
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px;">
          <label style="margin:0;font-weight:600;color:var(--text-muted-color);">Semesters:</label>
          <input id="semCountInput" type="number" min="1" value="1" style="width:80px;padding:8px;border-radius:6px;border:1px solid var(--border-color);background:var(--bg-secondary-color);color:var(--text-color);" />
          <button id="semGenerateBtn" class="icon-btn">Generate</button>
        </div>
        <table class="input-table">
          <thead>
            <tr>
              <th>Semester</th>
              <th>GPA</th>
              <th>Credits (optional)</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="semCgpaTableBody">
            <!-- JS will add rows here -->
          </tbody>
        </table>
        <button type="button" id="semCgpaAddRowBtn" class="icon-btn">
          <span>+</span> Add Semester
        </button>
        <button type="button" id="semCgpaCalcBtn" class="primary-btn">
          Calculate CGPA
        </button>
        <p id="semCgpaResult" class="modal-result"></p>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="main.js"></script>
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
  </body>
</html>

